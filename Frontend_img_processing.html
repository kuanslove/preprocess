

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>untitled</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 0.21" />
	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

	<style>
		* {
			padding:0px;
			margin:0px;
		}
		#preview {
			position:relative;
			left:100px;
			top:100px;
			border:1px solid pink;
			border-radius:5px;
		}
		
		
	</style>

</head>

<body>

<input type="file" id="img_file" style="display:none;" />
<canvas id="preview" width="60" height="60"></canvas>

	<script>
		jQuery(function($){
			
			$("#preview").click(function(){
				$("#img_file").click();
				});
				
			$("#img_file").change(function(){
				window.URL = window.URL || window.webkitURL;
				
				var f = document.getElementById('img_file').files[0];

if(f!=undefined){
	
	


// Give image data to an image object
				var img = new Image();
				img.src = window.URL.createObjectURL(f);
// Get the canvas drawing handler
				var preview = document.getElementById('preview');
				var ctx = preview.getContext('2d');

				img.onload = function(){
					var MAX_LEN=50;
					
					var w = this.width;
					var h = this.height;
					
					console.log(preview.width+"*-:-*"+preview.height);
					console.log(w+"-:-"+h);					
					if(w>h){
						w = MAX_LEN;
						h = w*this.height/this.width;
					}
					else
					{
						h = MAX_LEN;
						w = h*this.width/this.height;
					}
					console.log(w+":"+h);
					ctx.clearRect(0,0,60,60);
					ctx.drawImage(img, 5,5,w,h);
				};


}

				
				});
			
			
				
				
			});
	</script>
</body>












































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































</html>
